### Variables
# Shift = Shift Key
# Control = Control Key
# Mod1 = Alt Key
# Mod2 = Num Lock
# Mod3 = Scroll Lock
# Mod4 = Super Key (Windows Key)
# Mod5 = Hyper Key (Apple Key)
# Space = Space Key

set $mod Mod4
set $left h
set $down j
set $up k
set $right l
set $term foot
set $menu fuzzel
set $editor-emacs "emacsclient -c"

### Output Configuration
output HDMI-A-1 resolution 2560x1440@99.9Hz position 0,0
output eDP-1 resolution 1920x1080 position 2560,360

workspace 1 output HDMI-A-1
workspace 2 output HDMI-A-1
workspace 3 output HDMI-A-1
workspace 4 output HDMI-A-1
workspace 5 output HDMI-A-1
workspace 6 output HDMI-A-1
workspace 7 output HDMI-A-1
workspace 8 output HDMI-A-1
workspace 9 output HDMI-A-1
workspace 10 output eDP-1

### Input Configuration
input type:touchpad {
    dwt enabled
    tap enabled
    natural_scroll enabled
    middle_emulation enabled
}

input type:keyboard {
    xkb_layout "us"
    xkb_options caps:escape
}

### Startup & Services
exec emacs --daemon
exec wl-paste --watch cliphist store
exec xdg-desktop-portal-wlr &
exec xdg-desktop-portal &

exec_always {
    gsettings set org.gnome.desktop.interface gtk-theme 'Adwaita-dark'
    gsettings set org.gnome.desktop.interface color-scheme 'prefer-dark'
    gsettings set org.gnome.desktop.interface font-name 'IBM Plex Mono 12'
}

### Idle Configuration
exec swayidle -w \
    timeout 600 'dms ipc call lock lock' \
    timeout 1200 'swaymsg "output eDP-1 power off"' resume 'swaymsg "output eDP-1 power on"' \
    before-sleep 'dms ipc call lock lock'

# Prevent sleep for fullscreen apps
for_window [class="^.*"] inhibit_idle fullscreen
for_window [app_id="^.*"] inhibit_idle fullscreen

### Window Rules
for_window [window_role="pop-up"] floating enable
for_window [window_role="bubble"] floating enable
for_window [window_role="dialog"] floating enable
for_window [window_type="dialog"] floating enable
for_window [app_id="pavucontrol"] floating enable
for_window [app_id="nm-connection-editor"] floating enable

# Apps - No Border
for_window [app_id="^org\.gnome\..*"] border none
for_window [app_id="^org\.wezfurlong\.wezterm$"] border none
for_window [app_id="^Alacritty$"] border none
for_window [class="^org\.mozilla\.firefox$"] border none
for_window [class="^brave$"] border none
for_window [app_id="^com\.mitchellh\.ghostty$"] border none
for_window [app_id="^kitty$"] border none
for_window [app_id="^foot$"] border none
for_window [app_id="^thunar$"] border none
for_window [app_id="^emacs$"] border none

# Floating Windows
for_window [app_id="^gnome-calculator$"] floating enable
for_window [app_id="^blueman-manager$"] floating enable
for_window [app_id="^org\.quickshell$"] {
    floating enable
    border pixel 2
    sticky enable
    move position center
}
for_window [app_id="imv"] {
    floating enable
    border pixel 2
    sticky enable
    move position center
}

### General Key Bindings
floating_modifier $mod normal

bindsym $mod+Return exec $term
bindsym $mod+Shift+Return exec $editor-emacs

bindsym $mod+Shift+q kill
bindsym $mod+Shift+c reload
bindsym $mod+Shift+e exec swaynag -t warning -m 'Exit Sway?' -B 'Yes' 'swaymsg exit'

### Dank Linux Bindings
# Application Launchers
bindsym $mod+space exec "dms ipc call spotlight toggle"
bindsym $mod+v exec "dms ipc call clipboard toggle"
bindsym $mod+m exec "dms ipc call processlist focusOrToggle"
bindsym $mod+comma exec "dms ipc call settings focusOrToggle"
bindsym $mod+n exec "dms ipc call notifications toggle"
bindsym $mod+y exec "dms ipc call dankdash wallpaper"
bindsym $mod+Shift+p exec "dms ipc call powermenu toggle"

# Security
bindsym $mod+Mod1+l exec "dms ipc call lock lock"

# Audio Controls
bindsym --locked XF86AudioMute exec "dms ipc call audio mute"
bindsym --locked XF86AudioLowerVolume exec "dms ipc call audio decrement 3"
bindsym --locked XF86AudioRaiseVolume exec "dms ipc call audio increment 3"
bindsym --locked XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Keybinds Cheatsheet
bindsym $mod+Shift+slash exec "dms ipc call keybinds toggle sway"
bindsym $mod+Mod1+slash exec "dms ipc call keybinds toggle emacs"

# Screenshots
# Region select (File + Clipboard + Notify)
bindsym Print exec dms screenshot

# Full Screen (File + Clipboard + Notify)
bindsym Shift+Print exec dms screenshot full

# Edit Region in Swappy
bindsym $mod+Print exec "dms screenshot --stdout | swappy -f -"

# Brightness Controls
bindsym --locked XF86MonBrightnessDown exec "dms ipc call brightness decrement 5" ""
bindsym --locked XF86MonBrightnessUp exec "dms ipc call brightness increment 5" ""

# Color Picker
bindsym $mod+p exec /home/xynapz/.config/sway/scripts/color-picker.sh
bindsym $mod+Control+p exec /home/xynapz/.config/sway/scripts/color-picker.sh --rgb

# Navigation
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Moving Windows
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Workspaces
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

# Move Workspace to Monitor (QoL)
bindsym $mod+Control+$left move workspace to output left
bindsym $mod+Control+$right move workspace to output right

# Layout
bindsym $mod+b splith
# bindsym $mod+v splitv (Disabled for Clipboard Manager)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
bindsym $mod+f fullscreen
bindsym $mod+Shift+space floating toggle
bindsym $mod+a focus parent

bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

# Screenshots (Moved to Dank Bindings)

### Resize Mode
mode "resize" {
    bindsym $left resize shrink width 10px
    bindsym $down resize grow height 10px
    bindsym $up resize shrink height 10px
    bindsym $right resize grow width 10px
    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

### System Configs
include /etc/sway/config.d/*
